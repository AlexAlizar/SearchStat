
{% extends 'base.html' %}

{% block content %}
    <div class="col-sm-9">
        <div class="col-sm-6">
            {% if request.POST %}
                <form action="" method="post">
                    {% csrf_token %}
                    <p>Please select person:</p>
                    {{ form.dropdown }}
                    <input class="btn btn-dark btn-sm" type="submit" name="view" value="View">
                    <div>
                        <br>
                        {% if keywords %}
                            <ul class="list-group">
                                <li class="list-group-item active">keywords for <b>{{ person }}</b>:</li>
                                {% for keyword in keywords %}
                                    <li class="list-group-item">{{ keyword }}</li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <ul class="list-group">
                                <li class="list-group-item active">keywords for <b>{{ person }}</b>:</li>
                                <li class="list-group-item">No keywords for this person</li>
                            </ul>
                            </div>
                        {% endif %}
                    <br>
                    <a class='btn btn-dark btn-sm'href="{% url 'keywords_add' %}">Добавить</a>
                    <a class='btn btn-dark btn-sm'href="{% url 'keywords_delete' %}">Удалить</a>
                </form>
                </div>
            {% else %}
                <p>Please select person:</p>
                <form action="" method="post">
                    {% csrf_token %}
                    {{ form.dropdown }}
                    <input class="btn btn-dark btn-sm" type="submit" name="view" value="View">
                </form>
            {% endif %}
    </div>

{% endblock %}
{% block js %}
    <script type="text/javascript">
        $(function() {
            var dropdownValue = localStorage.getItem("dropdownValue");
            if(dropdownValue != null) {
                $("select[name=dropdown]").val(dropdownValue);
            }

            $("select[name=dropdown]").on("change", function() {
                localStorage.setItem("dropdownValue", $(this).val());
            });
        })
    </script>
{% endblock %}